<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Porte‑Clé • Théorie</title>
<link rel="icon" href="assets/icon.png">
<link rel="stylesheet" href="assets/css/styles.css">
<script type="module">
  import { $, $$, loadDatasets, markActive } from './assets/js/app.js';
  window.addEventListener('DOMContentLoaded', async ()=>{
    markActive();
    const params = new URLSearchParams(location.search);
    const domainFilter = params.get('d');
    const data = await loadDatasets();
    const list = $('#list');
    data
      .filter(d=>!domainFilter || d.domaine===domainFilter)
      .forEach(rule=>{
        const art = document.createElement('article');
        art.className='card';
        art.innerHTML = \`
          <h3>\${rule.titre}</h3>
          <p class="muted">\${rule.domaine}</p>
          <p>\${rule.description || "Résumé de la règle à compléter."}</p>
          <div class="controls">
            <a class="btn" href="exercices.html?r=\${encodeURIComponent(rule.id)}">S'entraîner</a>
            <a class="btn" href="off.html?r=\${encodeURIComponent(rule.id)}" target="_blank" rel="noopener">Imprimer</a>
          </div>\`;
        list.appendChild(art);
      });
  });
</script>
</head>
<body>
<nav class="top">
  <div class="inner">
    <img class="logo" src="assets/icon.png" alt="">
    <span class="brand">Porte‑Clé</span>
    <div style="flex:1"></div>
    <a href="index.html">Accueil</a>
    <a class="active" href="theorie.html">Théorie</a>
    <a href="exercices.html">Exercices</a>
    <a href="compte.html">Compte</a>
  </div>
</nav>
<main class="app">
  <h1>Théorie</h1>
  <section id="list" class="grid"></section>
</main>
</body>
</html>
